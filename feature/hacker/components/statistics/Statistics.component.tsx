"use client";
import { cn } from "@/core/lib/utils";
import { Typography } from "@/core/ui/components";
import DesktopLayout from "@/core/ui/layout/wrapper/DesktopLayout.wrapper";
import { useTranslations } from "next-intl";
import React from "react";
import { OverviewCard } from "./card";
import { AreaChartCard, PieChartCard } from "./card/chart";
import { FilterStatistic } from "./filter";
import { TicketListCard } from "./card/ticket";
import { useChatListParamStore } from "../../zustand/store/dashboard";
import { useGetTableColumns } from "../../constants/dashboard";
import { useGetChatList } from "../../query/client";

const Statistics = () => {
  const t = useTranslations("DashboardHacker");
  const store = useChatListParamStore();
  const { payload, setPayload } = store;
  const {
    queryDesktop: {
      data: dashboardData,
      isLoading,
      isFetching,
      refetch,
      isRefetching,
    },
    queryMobile: {
      data,
      isLoading: mobileIsLoading,
      refetch: mobileRefetch,
      isFetching: mobileIsFetching,
      isFetchingNextPage,
      fetchNextPage,
    },
  } = useGetChatList(payload);
  return (
    <DesktopLayout>
      <div className={cn("flex w-full flex-col gap-10")}>
        <div className={cn("flex w-full items-center justify-between")}>
          <Typography variant="h4">{t("overview")}</Typography>
          <FilterStatistic />
        </div>
        <div
          className={cn(
            "bg-statistic-logo-light dark:bg-statistic-logo-light",
            "flex w-full items-center justify-between gap-12 rounded-xl backdrop-blur-[7.5px]",
            "border border-neutral-light-80 px-5 py-6 dark:border-neutral-dark-80"
          )}
        >
          {Array.from({ length: 7 }).map(() => (
            <svg
              key={Math.random()}
              xmlns="http://www.w3.org/2000/svg"
              width="99"
              height="24"
              viewBox="0 0 99 24"
              fill="none"
            >
              <path
                d="M60.0402 13.7281C60.0681 13.7281 60.0986 13.7281 60.1291 13.7281C60.7159 13.7281 61.2875 13.7942 61.8362 13.9237L61.7854 13.9135L61.7448 14.287C61.572 15.7629 60.4873 16.9442 59.0748 17.2592L59.052 17.2643C58.9554 17.2846 58.8436 17.2973 58.7293 17.2973C57.952 17.2973 57.3016 16.7613 57.1238 16.0398L57.1213 16.0297C57.1111 15.9611 57.106 15.8798 57.106 15.7985C57.106 15.392 57.2483 15.0186 57.4871 14.7239L57.4845 14.7265C57.952 14.1828 58.6226 13.8272 59.3771 13.7738H59.3847C59.5778 13.7484 59.8064 13.7306 60.0351 13.7306L60.0402 13.7281ZM81.298 10.3697C82.1034 10.3697 82.5911 11.0937 82.5911 12.5951C82.5911 14.7747 81.7147 16.5657 80.6071 16.5657C79.7764 16.5657 79.2886 15.8163 79.2886 14.3378C79.2886 12.1353 80.1904 10.3697 81.298 10.3697ZM28.509 10.3697C29.3194 10.3697 29.8046 11.0937 29.8046 12.5951C29.8046 14.7747 28.9281 16.5657 27.818 16.5657C26.9898 16.5657 26.5046 15.8163 26.5046 14.3378C26.5046 12.1353 27.4039 10.3697 28.5115 10.3697H28.509ZM12.6722 7.42542C12.5147 8.66259 12.3496 9.89467 12.1159 11.0124C13.1575 10.987 14.0822 10.9616 16.5946 10.9616L10.8483 17.183L10.8 19.4135C12.2099 19.3195 13.9653 19.289 15.9747 19.289C17.7708 19.289 19.5745 19.3144 20.7278 19.4135C20.9336 17.9604 21.1393 16.9925 21.3934 15.8036C20.5195 15.8519 18.9978 15.8773 16.5946 15.8773L22.3409 9.62539L22.4146 7.42288C21.0276 7.49655 19.7802 7.51687 17.5904 7.51687C15.2126 7.51687 14.4962 7.49401 12.6722 7.42288V7.42542ZM28.9459 7.13836C25.2522 7.33651 22.3333 10.3799 22.3333 14.1066C22.3333 14.2387 22.3358 14.3683 22.3435 14.4978V14.4801C22.3282 14.6198 22.3206 14.7798 22.3206 14.9424C22.3206 17.62 24.4901 19.7894 27.1677 19.7894C27.2667 19.7894 27.3633 19.7869 27.4598 19.7818H27.4471C31.1408 19.5913 34.0622 16.5479 34.0622 12.8263C34.0622 12.684 34.0572 12.5417 34.0495 12.402V12.4223C34.0648 12.2801 34.0724 12.1175 34.0724 11.9498C34.0724 9.29006 31.9156 7.13328 29.2558 7.13328C29.1466 7.13328 29.0399 7.13582 28.9332 7.14344H28.9485L28.9459 7.13836ZM44.4371 7.11295C42.2143 7.48131 40.4132 8.98267 39.6257 10.9947L39.6104 11.0378C39.7603 10.3062 39.8467 9.46789 39.8467 8.6067C39.8467 8.12403 39.8187 7.64643 39.7654 7.17646L39.7705 7.23489C38.5638 7.44829 37.1539 7.58801 35.7186 7.62103H35.6855C35.6932 7.8268 35.6957 8.07068 35.6957 8.31455C35.6957 9.4628 35.6068 10.5882 35.4366 11.6882L35.4518 11.5662L34.9209 15.2015C34.7126 16.6292 34.4839 18.2779 34.2502 19.3195H38.546C38.5689 18.6869 38.7289 17.6962 38.8432 16.8248L39.2116 14.3302C39.5139 12.7069 40.8044 10.794 41.7977 10.794C42.3744 10.794 42.354 11.3528 42.1915 12.3944L41.7748 15.2041C41.5665 16.6318 41.3379 18.2805 41.1042 19.322H45.4431C45.4685 18.6895 45.6057 17.6962 45.7226 16.8274L46.0909 14.3327C46.3882 12.7069 47.6838 10.7965 48.6745 10.7965C49.2512 10.7965 49.2308 11.33 49.1369 12.054L48.0978 19.3246H52.0608L53.4504 11.0429C53.7527 8.98267 53.5901 7.11804 51.3038 7.11804C49.1445 7.46607 47.3865 8.89884 46.5888 10.8295L46.5736 10.8702C46.8505 8.93441 46.6879 7.11804 44.4244 7.11804L44.4371 7.11295ZM81.8239 6.98085C78.0819 7.18155 75.1249 10.263 75.1249 14.0355C75.1249 14.1701 75.1275 14.3022 75.1351 14.4343V14.4165C75.1199 14.5588 75.1122 14.7239 75.1122 14.8891C75.1122 17.5996 77.3097 19.7996 80.0228 19.7996C80.1219 19.7996 80.2209 19.7971 80.3175 19.792H80.3048C84.0467 19.5964 87.0063 16.5149 87.0063 12.7424C87.0063 12.5976 87.0012 12.4554 86.9936 12.3131V12.3334C87.0088 12.1912 87.0164 12.0235 87.0164 11.8558C87.0164 9.1605 84.8317 6.97577 82.1364 6.97577C82.0271 6.97577 81.9179 6.97831 81.8112 6.98594H81.8265L81.8239 6.98085ZM61.0766 6.78271C60.6651 6.79033 60.2688 6.82081 59.8776 6.87162L59.9309 6.86654C58.3356 7.04945 56.8901 7.5372 55.597 8.26629L55.6529 8.2358L56.4785 10.7406C57.3753 10.2325 58.4219 9.86673 59.5372 9.71176L59.5829 9.70668C61.29 9.49837 61.9861 10.0242 62.0902 10.8981C62.1029 11.015 62.1106 11.1522 62.1106 11.2919C62.1106 11.4773 62.0979 11.6577 62.0725 11.8355L62.075 11.8152L62.0318 11.993C61.4018 11.8635 60.6778 11.7898 59.9335 11.7898C59.4457 11.7898 58.963 11.8228 58.4931 11.8838L58.549 11.8787C57.0196 11.9956 55.6758 12.7069 54.7333 13.7764L54.7282 13.7814C54.2303 14.4623 53.9331 15.3184 53.9331 16.2431C53.9331 16.5327 53.9636 16.8172 54.0195 17.0916L54.0144 17.0636C54.271 18.5066 55.5132 19.5862 57.0095 19.5862C57.2966 19.5862 57.576 19.5456 57.8402 19.4719L57.8199 19.477C59.2349 19.322 60.4492 18.5751 61.2265 17.4904L61.2367 17.4752C61.2214 17.8308 61.1884 18.1636 61.1351 18.4888L61.1427 18.4405C61.0868 18.7911 61.0055 19.101 60.9013 19.4008L60.914 19.3627L64.8643 19.3652C64.844 18.9791 64.8432 18.5929 64.8618 18.2068C64.977 16.7503 65.2386 14.58 65.6468 11.6958C65.6823 11.4214 65.7027 11.1064 65.7027 10.7838C65.7027 10.4434 65.6798 10.1106 65.6366 9.78289L65.6417 9.821C65.3877 7.77599 63.6475 6.7446 61.0843 6.78016L61.0766 6.78271ZM73.0723 3.59961L69.0788 5.10097L68.5479 7.35429L67.1329 7.42034L66.7671 10.5247H68.0627L67.392 15.3184C66.9754 18.2982 67.5063 19.7031 70.1382 19.7031C71.4617 19.6802 72.6989 19.3347 73.7811 18.7403L73.7404 18.7606L74.2002 15.9027C73.6312 16.2126 72.9682 16.4285 72.2619 16.5047L72.2391 16.5073C71.4541 16.5073 71.3626 16.0957 71.5252 14.9576L72.1247 10.5247H74.7998C74.8963 9.87181 75.2164 7.74043 75.3078 7.34921H72.5617L73.0723 3.59961Z"
                fill="currentColor"
                className={cn("text-neutral-dark-100 dark:text-white")}
              />
            </svg>
          ))}
        </div>
        <div className={cn("grid grid-cols-3 items-center gap-5")}>
          <OverviewCard title="Bounties Paid" />
          <OverviewCard title="Active Tickets" />
          <OverviewCard title="Highest Bounties" />
        </div>
        <div className={cn("grid w-full grid-cols-2 items-center gap-5")}>
          <AreaChartCard />
          <PieChartCard />
        </div>
        <TicketListCard data={dashboardData?.data} />
      </div>
    </DesktopLayout>
  );
};

export default Statistics;
